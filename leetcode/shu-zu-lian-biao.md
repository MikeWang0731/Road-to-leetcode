---
description: Array and Linked List
cover: >-
  https://images.unsplash.com/photo-1641921402984-80bb92e69e6e?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxOTcwMjR8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDQzNzg1NzU&ixlib=rb-1.2.1&q=85
coverY: 0
---

# ğŸ’¡ æ•°ç»„/é“¾è¡¨

## Intro

æ•°ç»„é“¾è¡¨çš„ä¸»è¦ç®—æ³•æŠ€å·§æ˜¯<mark style="color:orange;">åŒæŒ‡é’ˆ</mark>ï¼ŒåŒæŒ‡é’ˆâ¼œåˆ†ä¸º<mark style="color:orange;">ä¸­é—´å‘ä¸¤ç«¯æ‰©æ•£çš„åŒæŒ‡é’ˆ</mark>ã€<mark style="color:orange;">ä¸¤ç«¯å‘ä¸­é—´æ”¶ç¼©çš„åŒæŒ‡é’ˆ</mark>ã€<mark style="color:orange;">å¿«æ…¢æŒ‡é’ˆ</mark>ã€‚æ­¤å¤–ï¼Œæ•°ç»„è¿˜æœ‰<mark style="color:orange;">å‰ç¼€å’Œå’Œå·®åˆ†æ•°ç»„</mark>ä¹Ÿå±äºå¿…çŸ¥å¿…ä¼šçš„ç®—æ³•æŠ€å·§ã€‚

## 303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜<mark style="color:green;">ï¼ˆEasyï¼‰</mark>

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„  `nums`ï¼Œå¤„ç†ä»¥ä¸‹ç±»å‹çš„å¤šä¸ªæŸ¥è¯¢:

è®¡ç®—ç´¢å¼• `left` å’Œ `right` ï¼ˆåŒ…å« `left` å’Œ `right`ï¼‰ä¹‹é—´çš„ `nums` å…ƒç´ çš„ **å’Œ** ï¼Œå…¶ä¸­ `left <= right`

```
è¾“å…¥ï¼š
["NumArray", "sumRange", "sumRange", "sumRange"]
[[[-2, 0, 3, -5, 2, -1]], [0, 2], [2, 5], [0, 5]]
è¾“å‡ºï¼š
[null, 1, -1, -3]
è§£é‡Šï¼š
[0,2] -> [-2,0,3] -> (-2)+0+3 = 1
[2,5] -> [3,-5,2,-1] -> 3+(-5)+2+(-1) = -1
```

### è§£å†³æ–¹æ¡ˆï¼ˆæˆ‘è‡ªå·±ï¼‰

ä½¿ç”¨forå¾ªç¯å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œéå†ï¼Œå› ä¸ºå·²ç»ç»™å®šäº†å·¦å³è¾¹ç•Œï¼Œæ‰€ä»¥ç›´æ¥ä»å·¦è¾¹ç•Œå¼€å§‹å–å€¼ï¼Œå–åˆ°å³è¾¹ç•Œç»“æŸå°±å¯ä»¥

```java
class NumArray {

    int[] nums;

    public NumArray(int[] nums) {
        this.nums = nums;
    }

    public int sumRange(int left, int right) {
        int sum = 0;
        // ä»leftå¼€å§‹å–ï¼Œå–åˆ°rightç»“æŸ
        for (int i = left; i <= right; i++) {
            sum = sum + nums[i];
        }
        return sum;
    }
}
```

**ä½†æ˜¯**ï¼Œè¿™æ ·çš„æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼Œå› ä¸ºæµ‹è¯•æ¡ˆä¾‹ä¸­è¦è¿è¡Œå¾ˆå¤šæ¬¡`sumRange()`æ–¹æ³•ï¼Œè¿™å°±ä½¿å¾—forå¾ªç¯ä¼šä¸€æ¬¡åˆä¸€æ¬¡çš„è¿è¡Œï¼Œé€Ÿåº¦å¾ˆæ…¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¦é¿å…åœ¨sumRangeä¸­ä½¿ç”¨forå¾ªç¯ï¼Œæ€ä¹ˆåŠï¼Ÿ

{% hint style="info" %}
è¿™é‡Œå¯ä»¥ä½¿ç”¨**â€œå‰ç¼€å’Œâ€**ï¼Œå³**prefix sum**æŠ€å·§ã€‚å‰ç¼€å’Œæ˜¯è¯´æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ–°æ•°ç»„çš„æ¯ä¸ªä½ç½®è®°å½•åŸæ•°ç»„çš„è¿™ä¸ªä½ç½®ä¹‹å‰çš„å’Œã€‚

Original: \[3, 5, 2, -2, 4, 1]

preSum: \[0, 3, 8, 10, 8 ,12, 13]

\----------------

preSum\[0] = inital zero

preSum\[1] = 3 + 0 = 3

preSum\[2] = 5 + 3 + 0 = 8
{% endhint %}

æœ‰äº†å‰ç¼€å’Œè¿™ä¸ªæŠ€å·§ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨`preSum[right+1] - preSum[left]`æ¥å¾—åˆ°æŸä¸ªåŒºé—´çš„å’Œã€‚ä¾‹å¦‚ä¸Šè¿°æ•°ç»„ï¼Œæˆ‘ä»¬æ±‚\[2, 4]è¿™ä¸ªåŒºé—´ï¼Œå°±å¯ä»¥ç”¨`preSum[5] - preSum[3]`æ¥å¾—åˆ°ç»“æœï¼Œæ˜¯4ã€‚è¿™æ˜¯å› ä¸ºï¼Œ**\[2, 4]åŒºé—´çš„å’Œå°±æ˜¯\[0, 4]åŒºé—´çš„å’Œå‡å»\[0, 2]åŒºé—´çš„å’Œ**ï¼Œåˆšå¥½å’Œå‰ç¼€å’Œçš„æ€§è´¨ç›¸ç¬¦ã€‚

<mark style="color:purple;">äºŒç»´æ•°ç»„ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ€§è´¨ï¼Œå…³é”®ç‚¹æ˜¯å»ºç«‹ä»¥åŸç‚¹ä¸ºæ ¸å¿ƒçš„æ•°ç»„æ¥ä¿å­˜ç»“æœã€‚</mark>

### è§£å†³æ–¹æ¡ˆï¼ˆå‰ç¼€å’Œï¼‰

```java
class NumArray {

    int[] preSum;

    public NumArray(int[] nums) {
        preSum = new int[nums.length + 1];
        // è¿™é‡Œä»1å¼€å§‹æ˜¯å› ä¸ºç¬¬ä¸€ä½è¦ä¿æŒä¸º0
        for (int i = 1; i < preSum.length; i++) {
            // preSum[i]æ˜¯nums[0..i-1]çš„å’Œ
            // nums[0..i-1] = preSum[i-1] + nums[i-1]
            // preSum[i-1]å°±æ˜¯nums[0..i-2]çš„å’Œ
            preSum[i] = preSum[i - 1] + nums[i - 1];
        }
    }

    public int sumRange(int left, int right) {
        return preSum[right + 1] - preSum[left];
    }
}
```

## 560. å’Œä¸º K çš„å­æ•°ç»„<mark style="color:yellow;">ï¼ˆMediumï¼‰</mark>

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­å’Œä¸º `k` **** çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚

```
è¾“å…¥ï¼šnums = [1,1,1], k = 2
è¾“å‡ºï¼š2
[1*,1*,1] -> ç¬¬ä¸€ç»„
[1,1*,1*] -> ç¬¬äºŒç»„

è¾“å…¥ï¼šnums = [1,2,3], k = 3
è¾“å‡ºï¼š2
[1, 2] -> 3
[3] -> 3
```

### è§£å†³æ–¹æ¡ˆï¼ˆå‰ç¼€å’Œï¼‰

{% hint style="info" %}
å‰ç¼€å’Œçš„æ ¸å¿ƒæ˜¯:`preSum[n] - preSum[n-1]ï¼Œå‰ç¼€å’Œå®šä¹‰æ˜¯ï¼špreSum[i]æ˜¯æŒ‡åŸæ•°ç»„[0..i-1]çš„æ‰€æœ‰å…ƒç´ çš„ç´¯åŠ å’Œ`
{% endhint %}

ä»¥å¾€æˆ‘ä»¬ä¼šä½¿ç”¨åŒæŒ‡é’ˆçš„æ–¹æ³•å¯¹æ‰€æœ‰å¯èƒ½çš„åŒºé—´è¿›è¡Œæ£€ç´¢ï¼Œè‹¥æ»¡è¶³`preSum[i]-preSum[j] = k`åˆ™è¯´æ˜æœ‰è¿ç»­çš„å­æ•°ç»„çš„å’Œä¸ºæ•´æ•°`k`ï¼Œæˆ‘ä»¬å°±å°†ç»“æœè®¡æ•°å™¨åŠ ä¸€ã€‚ä½†æ˜¯è¿™éœ€è¦ä¸¤é‡å¾ªç¯ï¼Œå½±å“æ•ˆç‡ã€‚**æ‰€ä»¥æˆ‘ä»¬æå‡ºä»¥ä¸‹ä¼˜åŒ–æ€è·¯ï¼š**<mark style="color:green;">å°†ä¸Šè¿°å…¬å¼ç§»é¡¹å¾—åˆ°</mark>`preSum[j] = preSum[i]-k`ï¼Œè¿™æ ·å°±å˜æˆäº†â€œå¦‚æœ`preSum[j]`<mark style="color:red;">æ˜¯0æˆ–è€…kæœ¬èº«</mark>ï¼Œé‚£ä¹ˆå°±è¯´æ˜æˆ‘ä»¬æ‰¾åˆ°äº†è¿ç»­æ•°ç»„â€ ã€‚<mark style="color:red;">å¹¶ä¸”æˆ‘ä»¬å°†æ‰€æœ‰çš„å‰ç¼€å’Œéƒ½æ·»åŠ åˆ°HashMapä¸­ï¼Œkeyä¸ºå‰ç¼€å’Œæœ¬èº«ï¼Œvalueæ˜¯å®ƒå‡ºç°çš„æ¬¡æ•°</mark>ã€‚è¿™æ ·æˆ‘ä»¬å°±åªéœ€è¦ä¸€ä¸ªforå¾ªç¯ã€‚

ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·è¯´ï¼Ÿå‡è®¾`k=3`ï¼ŒæŸä¸€è½®`preSum[i] = 3`ï¼Œé‚£ä¹ˆæ­¤æ—¶preSum\[j]å°±æ˜¯`3-3=0`ï¼Œè¿™å°±è¯´æ˜ï¼Œå‰ç¼€å’Œç´¯åŠ åˆ°`nums[i-1]`è¿™ä¸€ä½æ—¶ï¼Œè¿ç»­æ•°ç»„å’Œåˆšå¥½æ»¡è¶³è¦æ±‚ï¼Œç¬¦åˆé¢˜ç›®æ¡ä»¶ã€‚æ­¤æ—¶`count++`ã€‚è¿™æ˜¯Case 1.

å½“ç„¶ï¼Œè¿˜æœ‰ç¬¬äºŒç§æƒ…å†µï¼Œå³Case2ï¼Œå¦‚æœæŸè½®`preSum[i]-k`çš„å·®æ˜¯`k`æœ¬èº«ï¼Œåˆ™è¯´æ˜`preSum[i]`å’Œ`preSum[i-1]`ä¹‹é—´åˆšå¥½å·®äº†ä¸€ä¸ª`k`ã€‚å³è¿™ä¸€è½®`preSum[i]`ä¸­æ–°åŠ å…¥å…ƒç´ `nums[i-1]`çš„å€¼åˆšå¥½å’Œkä¸€æ ·ï¼Œ`nums[i-1]`å®ƒè‡ªå·±å°±ç‹¬ç«‹æ»¡è¶³æ¡ä»¶ã€‚æ­¤æ—¶`count++`ã€‚

```
nums: [1, 2, 3], k = 3
preSum: [0, 1, 3, 6]
--------------
Case 1: preSum[i] - k = 0
preSum[2] = 3, k = 3, sum_j = 0
preSum[2] = nums[0] + nums[1] = 1 + 2 = 3 [Satisfy requirement]
--------------
Case 2: preSum[i] - k = k
preSum[3] = 6, k = 3, sum_j = 6 - 3 = 3
preSum[3] = nums[0] + nums[1] + nums[2] = preSum[2] + nums[2]
That is, An independent nums[2] also satisfy the requirement
```

```java
 class Solution {

    public int subarraySum(int[] nums, int k) {
        // key: <Sum, å‡ºç°æ¬¡æ•°>
        HashMap<Integer, Integer> preSum = new HashMap<>();
        // è®¡æ•°ï¼šå­æ•°ç»„çš„ä¸ªæ•°
        int resultCount = 0;
        // åŸæ•°ç»„ç”¨äºè®°å½•å‰ç¼€å’Œçš„å˜é‡(nums[0..i])
        int sum_i = 0;
        // base zero init
        preSum.put(0, 1);
        // éå†numsä¸­çš„å…¨éƒ¨å…ƒç´ 
        for (int i = 0; i < nums.length; i++) {
            // å½“å‰ä¸€è½®çš„å‰ç¼€å’Œ
            sum_i = sum_i + nums[i];
            // è¿™æ˜¯æˆ‘ä»¬ç”¨æ¥åšâ€œå‡æ³•â€çš„å‰ç¼€å’ŒpreSum[j]çš„å˜ä½“
            // if (sum_i - sum_j == k) count++; å¤šé¡¹å¼ç§»é¡¹
            int sum_j = sum_i - k;
            // å¦‚æœmapçš„keyé‡Œå‡ºç°è¿‡å’Œsumjä¸€æ ·çš„æ•°å€¼ï¼Œæˆ‘ä»¬å°±æ›´æ–°ç»“æœ
            if (preSum.containsKey(sum_j)) {
                resultCount = resultCount + preSum.get(sum_j);
            }
            // æ¯è½®ç»“æŸæ—¶ï¼Œå°†å½“å‰è¿™ä¸€è½®çš„å‰ç¼€å’ŒåŠ å…¥åˆ°hashmapå¹¶è®°å½•æ¬¡æ•°+1
            // getOrDefault()ï¼Œè¿”å›æŸä¸ªç‰¹å®škeyçš„valueï¼Œè‹¥mapä¸åˆ°è¿™ä¸ªkeyï¼Œåˆ™ç”¨defaultå€¼æ›¿ä»£
            preSum.put(sum_i, preSum.getOrDefault(sum_i, 0) + 1);
        } 

        return resultCount;
    }
}
```
